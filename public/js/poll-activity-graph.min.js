if("undefined"!=typeof wp&&wp.i18n){let __=wp.i18n.__}($=>{window.onload=function(){$(".poll-bar-chart").each(function(){var arr_label,arr_per,arr_color,act_id=$(this).data("id"),id=$(this).attr("id"),res=JSON.parse(bpolls_wiget_obj.votes);res[act_id]&&(arr_label=[],arr_per=[],arr_color=[],$.each(res[act_id],function(i,item){arr_label.push(item.label.toString()),arr_per.push(item.y.toString()),arr_color.push(item.color)}),new Chart($("#"+id),{type:"pie",data:{labels:arr_label,datasets:[{label:"Poll Activity Graph (%)",backgroundColor:arr_color,data:arr_per}]},options:{title:{display:!0,text:res[act_id][0].poll_title}}}))}),$(".poll-activity-chart").each(function(){var arr_label,arr_per,arr_color,act_id=$(this).data("id"),id=$(this).attr("id"),res=JSON.parse(bpolls_wiget_obj.votes);res[act_id]&&(arr_label=[],arr_per=[],arr_color=[],$.each(res[act_id],function(i,item){arr_label.push(item.label.toString()),arr_per.push(item.y.toString()),arr_color.push(item.color)}),new Chart($("#"+id),{type:"pie",data:{labels:arr_label,datasets:[{label:"Poll Activity Graph (%)",backgroundColor:arr_color,data:arr_per}]}}))})},""!=$(".bpolls-activities-list option:selected").val()&&$(".bpolls-activities-list").trigger("change"),$(document).on("change",".bpolls-activities-list",function(){var actid=$(this).find(":selected").val(),clickd_obj=$(this),data={action:"bpolls_activity_graph_ajax",actid:actid,ajax_nonce:bpolls_wiget_obj.ajax_nonce};$.post(bpolls_wiget_obj.ajax_url,data,function(response){clickd_obj.parents().siblings(".poll-bar-chart").remove(),$('<canvas class="poll-bar-chart" data-id="'+actid+'" id="bpolls-activity-chart-'+actid+'"></canvas>').insertAfter(clickd_obj.parents(".bpolls-activity-select"));var response=JSON.parse(response),arr2_label=[],arr2_per=[],arr2_color=[],title="";$.each(response[actid],function(i,item){arr2_label.push(item.label.toString()),arr2_per.push(item.y.toString()),arr2_color.push(item.color),title=item.poll_title}),new Chart(clickd_obj.parents().siblings(".poll-bar-chart"),{type:"pie",data:{labels:arr2_label,datasets:[{label:"Poll Activity Graph (%)",backgroundColor:arr2_color,data:arr2_per}]},options:{title:{display:!0,text:title}}})})}),$(document).ready(function(){$(document).on("change",".bpolls-activities-list",function(e){e.preventDefault(),$("#export-poll-data").attr("href","?export_csv=1&buddypress_poll=1&activity_id="+$(this).val()+"&_wpnonce="+bpolls_wiget_obj.export_csv_nonce)})})})(jQuery);